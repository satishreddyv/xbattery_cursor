---
description: Embedded C and project conventions for Xbattery S32K
globs: "**/*.c,**/*.h"
alwaysApply: false
---

# Embedded Best Practices (Xbattery S32K)

- **Hardware registers**: Always use `volatile` when accessing device registers (e.g. `*(volatile uint32_t *)ADDR`).
- **No dynamic allocation in safety paths**: Avoid `malloc`/`free` in interrupts and critical code; use static or pool allocation.
- **Use `static` and `const`**: Prefer `static` for file-local functions/variables; use `const` for read-only data and pointer targets.
- **Stack and heap**: Respect linker-defined stack size; avoid large stack-allocated buffers; document heap use if used.
- **Naming**: Use clear names for ISRs (e.g. `UART0_IRQHandler`); keep register/bit names aligned with the S32K reference manual.
- **Project layout**: Application code in `src/`; startup and linker script in `startup/`; follow existing include paths.
- **Company**: Xbattery. Keep comments and module headers consistent with this project.
